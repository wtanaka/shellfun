include(functions.m4)dnl
include(init.m4)dnl
changequote({{, }})dnl
dnl -----------------------------------------------------------------------
dnl --------------------   Common functions  ------------------------------
dnl -----------------------------------------------------------------------

terminalname() { builtin print -n -P "\033]1;$*\007" }
terminalnametitle() { builtin print -n -P "\033]0;$*\007" }
terminaltitlename() { builtin print -n -P "\033]0;$*\007" }
terminaltitle() { builtin print -n -P "\033]2;$*\007" }
netscape-newwindow() { netscape -noraise -remote "openURL($*,new-window)" }
urlfor()
{
   hostname=`uname -n`
   for i ; do
      dirname=`dirname $i`
      filename=`basename $i`
      if [[ $dirname == /* ]]; then
         echo "file://${hostname}$dirname/$filename"
      else
         echo "file://${hostname}`pwd`/$dirname/$filename"
      fi
   done
}

umask 022

HISTSIZE=1000
setopt HIST_ALLOW_CLOBBER
setopt HIST_IGNORE_DUPS
setopt HIST_NO_STORE
setopt SH_WORD_SPLIT

#export JAVA_COMPILER=NONE
export CVSROOT="$HOME/cvsroot"
export CVS_RSH="ssh"
export IRCNAME="BoXo D Clown"
export PAGER="less -ieXw -x3"
export VISUAL=vim
export WWW_HOME="http://mongers.ml.org./"
export TEXEDIT='vim +%d %s'
export FPATH="$HOME/bin/zshf"

alias pu="pushd"
alias po="popd"
alias cp="cp -i"
alias mv="mv -i"
alias rm="rm -i"
alias z="zwrite wtanaka"
alias less="less -ieXw -x3"
alias dir="ls --color=tty -lstr"
alias who="who -iHw"
alias gzip="gzip -9"
alias U="cvs update"
alias C="cvs commit"
Rd() { cvs -d `cat $@/CVS/Root` release -d $@ }

if [ -n "`which arch | grep -v not\ found`" ]; then
   export ARCH=`arch`
fi
READNULLCMD=""

include(zpath.m4)

dnl -----------------------------------------------------------------------
dnl - Host specific stuff
dnl -----------------------------------------------------------------------
ifelse(SYS_HOST, {{castor.mongers.ml.org}},
if [[ ! "$PATH" == *wtanaka* ]]; then
   export PATH="$PATH:/usr/local/java/bin:/home/wtanaka/bin:$FPATH"
fi
export CLASSPATH="/usr/local/java/lib/classes.zip:$HOME:."
)dnl
ifelse(SYS_HOST, {{shyster.dabney.caltech.edu}},
{{export LD_LIBRARY_PATH="$LD_LIBRARY_PATH:/usr/local/rvplayer5.0b1"
export CLASSPATH="/usr/local/java/lib/classes.zip:/usr/local/share/kaffe/classes.zip:$HOME/public_html/java:$HOME:."
export KAFFEHOME="/usr/local/share/kaffe"
if [[ ! "$PATH" == *wtanaka* ]]; then
   export PATH="$PATH:/usr/local/jdk1.1.3/bin:/home/wtanaka/bin:$FPATH"
fi

export INFOPATH="/usr/info:/usr/local/info"
export SCREENDIR="$HOME/.screen"
alias zwrite="zwe"
alias ppp="exec /usr/sbin/pppd -detach"
}})dnl
ifelse(SYS_HOST, {{smonger.mongers.ml.org}},
{{setopt HIST_REDUCE_BLANKS
export LD_LIBRARY_PATH="$LD_LIBRARY_PATH:/usr/local/rvplayer5.0b1:/usr/i486-linux-libc5/lib"
export CLASSPATH="/usr/local/jdk1.1.3/lib/classes.zip:$HOME/public_html/java:$HOME:."
export KAFFEHOME="/usr/local/share/kaffe"
if [[ ! "$PATH" == *wtanaka* ]]; then
   export PATH="$PATH:/home/wtanaka/bin:$FPATH"
fi

export INFOPATH="/usr/info:/usr/local/info"
export SCREENDIR="$HOME/.screen"
export MAILDIR="$HOME/Maildir"
export MAILTMP="$HOME/.maildir-tmp"
alias zwrite="zwe"
alias ppp="exec /usr/sbin/pppd -detach"
}})dnl
ifelse(SYS_HOST, {{spica.mili.eu.org}},
export CLASSPATH="/usr/local/java/lib/classes.zip:$HOME:$HOME/public_html/java:."
export MAILDIR="$HOME/Maildir"
export MAILTMP="$HOME/.maildir-tmp"
)dnl
ifelse(SYS_HOST, {{lard}},
export CLASSPATH="/usr/local/java/lib/classes.zip:$HOME:."
export PATH="$PATH:/usr/sbin:/usr/games:/home/wtanaka/bin:/usr/local/java/bin:/usr/bin/X11"
)dnl
ifelse(SYS_HOST, {{lolita.dabney.caltech.edu}},
export PATH="/usr/local/jdk1.1.1/bin:/usr/local/bin:/bin:/usr/bin:/usr/X11R6/bin:/usr/bin/mh:/usr/sbin"
export CLASSPATH="$HOME:/usr/local/jdk1.1.1/lib/classes.zip:$HOME/public_html/java:."
)
ifelse(SYS_HOST, {{jotunheim.caltech.edu}},
export PATH="$HOME/jdk1.1.3/bin:/usr/local/bin:/bin:/usr/bin:/usr/bin/X11"
export CLASSPATH="$HOME:$HOME/jdk1.1.3/lib/classes.zip:$HOME/public_html/java:."
)
dnl -----------------------------------------------------------------------
dnl - Lab specific stuff
dnl -----------------------------------------------------------------------

### Lab Specific Stuff

export LAB="SYS_LAB"

ifelse(SYS_LAB, {{DABNEY}},
   export PATH="$PATH:/usr/sbin:/usr/local/java/bin:/home/wtanaka/bin"
   export CLASSPATH="$CLASSPATH:$HOME/public_html/java:$HOME:."
)dnl
dnl
ifelse(SYS_LAB, {{UGCS}}, 
{{   autoload g gale_private gale_public gwrite message message_cleanup z zephyr_private zephyr_public zwe
   alias netscape="netscape-4"
   alias w="uptime; hoo -m `uname -n`"
   alias zwrite="zwe"
   alias zf="zfixed wtanaka"
   alias w="uptime; hoo -m $HOST"
   alias vf="~granny/bin/vf"
   alias lpr="print"
   alias lpq="lpstat"
   alias ls="gls -F"
   alias leastload="hoo|tail +3|guniq -w 9|cut -c11-22|sort|uniq -c|sort -nr"
   export ARCH=`/usr/ug/bin/arch`
   export CLASSPATH="$JAVA_HOME/classes:/home/wtanaka/public_html/java:$HOME:."
   export PATH="/usr/ug/bin:/bin:/usr/bin:/etc:/usr/etc:/usr/contrib/bin:/home/wtanaka/bin:/home/cs3/bin:/home/wtanaka/cs2/bin:$FPATH"
   export SCREENDIR=/ug/tmp/wtanaka/screen
#      LaTeX stuff
   export TEXINPUTS=.:/home/mid/tex/inputs//:/usr/ug/lib/texmf/tex//:/home/mid/tex/latex/contrib/other//
#      export TEXFONTS=.:/home/mid/tex/fonts//tfm:/usr/ug/lib/texmf/fonts//tfm
   export TEXFORMATS=.:/home/mid/tex/formats:/usr/ug/lib/texmf/ini:/usr/ug/share/tex-6.2/lib/texmf/ini/
#      export DVIPSFONTS=/home/mid/tex/fonts//
#      export XDVIFONTS=/home/mid/tex/fonts//
   export MOZILLA_HOME="/usr/ug/${ARCH}/netscape-4.03"
   if [[ $TERM == screen ]]; then
      export TERM=vt100
   fi
   if [[ $ARCH == irix* ]]; then
#     export SGI_ABI=-n32
      export PATH="/usr/ug/bin:/bin:/usr/bin:/usr/bsd:/usr/sbin:/etc:/usr/etc:/usr/contrib/bin:/home/wtanaka/bin:/home/cs3/bin:/home/wtanaka/cs2/bin:$FPATH"
      export LD_LIBRARYN32_PATH=/usr/lib32:/lib32
      export LD_LIBRARY_PATH=/usr/lib:/usr/local/lib:/usr/ug/lib
      export JAVA_HOME=/usr/ug/irix6/jdk
      #alias avida="~charles/avida.prim.sgi"
      #alias avida="~wtanaka/tmp/avida/avida-0.1b/avida/avida.irix6"
      alias uptime="/usr/bsd/uptime"
      alias xanim="~tots/jk/irix6/bin/xanim"
   elif [[ $ARCH == hp* ]]; then
      #alias avida="~wtanaka/tmp/avida/avida-0.1b/avida/avida"
      alias avida="echo Warning, this is avida 0.4b|figlet; sleep 1; /home/cns175/bin/hp9000s700/avida-0.4b"
   fi}})
dnl
ifelse(SYS_LAB, {{CS}},
alias dir="ls -Flstr"
export ARCH=`uname -m`
export CLASSPATH="$HOME:$HOME/public_html/java:$HOME/info_repository/common:$HOME/info_repository/infospheres2:$HOME:."
KINIRYARCH="`uname -s``uname -r`"
GENPATH="/usr/local/jdk1.1.5/bin:/usr/local/bin:/usr/bin:/bin:/sbin:/usr/sbin:/usr/ucb:\
/ufs/info/bin/$KINIRYARCH/jdk1.1.3/bin:$HOME/bin:/usr/X11/bin"
SUN4PATH="/usr/local/X11/bin:/usr/local/bin/X11"
PENTPATH="/usr/local/java/bin:/usr/local/cad/bin:/usr/local/cosmos/bin"
export TEXINPUTS=.:/usr/local/teTeX/texmf/tex//:/usr/local/tex/lib/texmf/tex//:$HOME/tex//
if [ "$ARCH" = "i386" ]; then
   export PATH="$GENPATH:$PENTPATH"
elif [ "$ARCH" = "sun4" -o "$ARCH" = "sun4u" ]; then
   export PATH="$GENPATH:$SUN4PATH"
else
   export PATH="$GENPATH"
fi
   )

make_commands_reset_terminal_title()
{
   for i in "$@"; do
      {{eval "$i() { "`which $i`" \"\$@\"; resetterminaltitle }"}}
   done
}
if [ ! "$TERM" = "linux" -a ! "$XTERMTYPE" = "utility" ]; then
   make_commands_reset_terminal_title ssh telnet rlogin pine vim
fi

alias vim="vim -n"
unfunction make_commands_reset_terminal_title

{{eval 'resetterminaltitle() { if [[ -z "$NOSETTERMINALNAME" && -o interactive ]]; then terminaltitle "'`uname -n`!`whoami` '('`uname -s` `uname -r`') ('`tty`')"; terminalname "'`uname -n`!`whoami`'"; fi }'}}
